<mat-card class="admin-edit-card">
  
  <!-- Profile Image Upload and Preview -->
<div class="profile-container" *ngIf="admin">
  <img
    [src]="imagePreview || (admin?.profileImage ? backendUrl + admin.profileImage : 'assets/avatar.png')"
    (error)="onImageError($event)"
    alt="Profile"
    class="profile-img" 
  />

  <input type="file" (change)="onFileSelected($event)" accept="image/*" />
</div>


<!-- Image Compression Spinner -->
<div *ngIf="isCompressing" class="spinner-container">
  <mat-spinner diameter="30"></mat-spinner>
  <span>Compressing image...</span>
</div>

<!-- Save Spinner -->
<div *ngIf="isSaving" class="spinner-container">
  <mat-spinner diameter="30"></mat-spinner>
  <span>Saving...</span>
</div>


  <div class="form-header">
    <h2>{{ isEditing ? 'Edit Admin' : 'Create Admin' }}</h2>
    <button mat-raised-button color="primary" (click)="onSubmit()">Save</button>
  </div>

  <mat-divider></mat-divider>

  <form [formGroup]="adminForm" class="admin-form-grid">
    <!-- LEFT COLUMN -->
    <div class="form-column">
      <mat-form-field appearance="fill">
        <mat-label>Name</mat-label>
        <input matInput formControlName="name" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Username</mat-label>
        <input matInput formControlName="username" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Mobile</mat-label>
        <input matInput formControlName="mobile" />
      </mat-form-field>
    </div>

    <!-- RIGHT COLUMN -->
    <div class="form-column">
      <mat-form-field appearance="fill">
        <mat-label>Date of Birth</mat-label>
        <input matInput [matDatepicker]="picker" formControlName="dateOfBirth" />
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Profile Image URL</mat-label>
        <input matInput formControlName="profileImage"  />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Password</mat-label>
        <input matInput formControlName="password" [type]="'password'" />
      </mat-form-field>

      <mat-checkbox formControlName="isActive">Is Active</mat-checkbox>
    </div>

    <!-- FULL WIDTH NOTES -->
    <div class="form-full">
      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Notes</mat-label>
        <textarea matInput formControlName="notes" rows="3"></textarea>
      </mat-form-field>
    </div>
  </form>
</mat-card>
